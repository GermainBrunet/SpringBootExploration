<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="~{fragments/layout}"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
<title>Product List</title>
</head>
<body>
	<div layout:fragment="content" th:remove="tag">

		<div class="row">
			<div class="col-md-6 col-md-offset-3">
				<h1>Product List</h1>
				<div th:switch="${page.content}" class="container my-5">
					<div class="row">
						<div class="col-md-6">
							<h2 th:case="null">No products yet!</h2>
							<div th:case="*">
								<table class="table table-striped table-responsive-md">
									<thead>
										<tr>
											<th>Manufacturer</th>
											<th>Name</th>
											<th>Model Number</th>
											<th>Best Price</th>
											<th>View</th>
											<th>Delete</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="product : ${page.content}">
											<td th:text="${product.manufacturerName}"></td>
											<td th:text="${product.productName}"></td>
											<td th:text="${product.modelNumber}"></td>
											<td th:text="${product.lowestPrice}"></td>
											<td><a th:href="@{/productView/{id}(id=${productId})}"
												class="btn btn-primary"><i class="fas fa-user-edit ml-2"></i></a></td>
											<td><a th:href="@{/delete/{id}(id=${productId})}"
												class="btn btn-primary"><i
													class="fas fa-user-times ml-2"></i></a></td>
										</tr>
									</tbody>
								</table>
							</div>

							<!-- Pagination Bar -->
							<div th:fragment='paginationbar'>
								<div class='pagination pagination-centered'>
									<ul>
										<li th:class="${page.firstPage}? 'disabled' : ''"><span
											th:if="${page.firstPage}">← First</span> <a
											th:if="${not page.firstPage}"
											th:href="@{${page.url}(page=1,size=${page.size})}">←
												First</a></li>
										<li th:class="${page.hasPreviousPage}? '' : 'disabled'">
											<span th:if='${not page.hasPreviousPage}'>«</span> <a
											th:if='${page.hasPreviousPage}'
											th:href='@{${page.url}(page=${page.number-2},size=${page.size})}'
											title='Go to previous page'>«</a>
										</li>
										<li th:each='item : ${page.items}'
											th:class="${item.current}? 'active' : ''"><span
											th:if='${item.current}' th:text='${item.number}'>1</span> <a
											th:if='${not item.current}'
											th:href='@{${page.url}(page=${item.number-1},size=${page.size})}'><span
												th:text='${item.number}'>1</span></a></li>
										<li th:class="${page.hasNextPage}? '' : 'disabled'"><span
											th:if='${not page.hasNextPage}'>»</span> <a
											th:if='${page.hasNextPage}'
											th:href='@{${page.url}(page=${page.number},size=${page.size})}'
											title='Go to next page'>»</a></li>
										<li th:class="${page.lastPage}? 'disabled' : ''"><span
											th:if='${page.lastPage}'>Last →</span> <a
											th:if='${not page.lastPage}'
											th:href='@{${page.url}(page=${page.totalPages},size=${page.size})}'>Last
												→</a></li>
									</ul>
								</div>
							</div>

							<!-- 
							<div class="pagination-div">
								<span th:if="${page.hasPreviousPage}"> <a
									th:href="@{/productListNew(page=${page.number-1},size=${page.size})}">Previous</a>
								</span>
								<th:block
									th:each="i: ${#numbers.sequence(0, page.totalPages - 1)}">
									<span th:if="${page.number == i}" class="selected">[[${i}+1]]</span>
									<span th:unless="${page.number == i}"> <a
										th:href="@{/productListNew(page=${i},size=${page.size})}">[[${i}+1]]</a>
									</span>
								</th:block>
								<span th:if="${page.hasNextPage}"> <a
									th:href="@{/productListNew(page=${page.number+1},size=${page.size})}">Next</a>
								</span>
							</div>
							 -->
							

							<p sec:authorize="isAuthenticated()" class="my-5">
								<a href="/signup" class="btn btn-primary"><i
									class="fas fa-user-plus ml-2">Add Product</i></a>
							</p>
						</div>
					</div>
				</div>


			</div>
		</div>
	</div>
</body>
</html>