<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="~{fragments/layout}"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
<title>Product List</title>
</head>
<body>
	<div layout:fragment="content" th:remove="tag">

		<div class="container my-5">
			<h2 class="mb-5">Product</h2>
			<div class="row">
				<div class="col-md-6">
					<div class="row">
						<div class="form-group col-md-6">
							<label for="name" class="col-form-label">Name</label>
							<p th:text="${product.name}"></p>
						</div>
						<div class="form-group col-md-6">
							<label for="name" class="col-form-label">Model Number</label>
							<p th:text="${product.modelNumber}"></p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div th:switch="${prices}" class="container my-5">
			<div class="row">
				<div class="col-md-6">
					<h2 th:case="null">No prices yet!</h2>
					<div th:case="*">
						<table class="table table-striped table-responsive-md">
							<thead>
								<tr>
									<th>Website</th>
									<th>Date</th>
									<th>Price</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="price : ${prices}">
									<td th:text="${price.url}"></td>
									<td th:text="${price.date}"></td>
									<td th:text="${price.price}"></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div sec:authorize="isAuthenticated()" class="my-5">
						<form action="#" th:action="@{/addproductprice}"
							th:object="${productPriceForm}" method="post">
							<div class="row">
								<div class="form-group col-md-6">
									<label for="url" class="col-form-label">URL</label> <input
										type="text" th:field="*{url}" class="form-control" id="url"
										placeholder="url" /> <span
										th:if="${#fields.hasErrors('url')}" th:errors="*{url}"
										class="text-danger"></span>
								</div>
								<div class="form-group col-md-6">
									<label for="price" class="col-form-label">Price</label> <input
										type="text" th:field="*{price}" class="form-control"
										id="price" placeholder="Price" /> <span
										th:if="${#fields.hasErrors('price')}" th:errors="*{price}"
										class="text-danger"></span>
								</div>
								<input type="hidden" name="productId" th:field="*{productId}"
									th:value="${product.id}"></input>
							</div>
							<div class="row">
								<div class="col-md-6 mt-5">
									<input type="submit" class="btn btn-primary" value="Add URL">
								</div>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
</html>